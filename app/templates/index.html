{% extends "layout/base.html" %}

{% block head %}
<style>
    body {
        overflow-y: auto;
    }
#top {
    margin-top: 60px;
}
</style>
{% endblock %}

{% block content %}
<div id="top" class="container marketing">
    
    <!-- START THE FEATURETTES -->
    
    <div class="row">
        <div class="col-md-12">


    <div class="row">
        <div class="col-md-12">    
            <p>
            <center>
            <h1>Gentrifi-CRIME-tion</h1>
            </p>
        </div>
    </div>

    <!-- GET THE INPUT -->

    <div class="row">
        <div class="col-md-3">
            <form action="/out" method="POST">
                <br/>
                ENTER AN ADDRESS: <input type="text" name="searchPhrase">
                <br/>
                <br>
                <input type="submit">
            </form>

            <!-- DISPLAY SOME INFORMATION -->

            <div>
                {% if t_dat %}
                <p>{{t_dat}}</p>
                {% endif %}
            </div>
        </div>
    

    <!-- RENDER THE MAP -->

    <div class="col-md-9">
        <hr>
        <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=false&key=AIzaSyCJC3IiY1qVYpksDJ4GnS1C2LwKaOrFazM"></script>
        <script type="text/javascript">

      function initialize() {
        var mapDiv = document.getElementById('map-canvas');
        var map = new google.maps.Map(mapDiv, {
          center: new google.maps.LatLng(37.7563659, -122.4496905),
          zoom: 12,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        
        {% if valid %}
        var content_string = '<p style="overflow: auto;"><span style="float: left;margin-top: 10px;margin-left: 10px;verticle-align:middle;">THIS IS WHERE<br> OTHER STUFF GOES<br>{{out_text}}</span>  <img style="float:left;" src="{{url_for('static', filename='pictogram.jpg')}}"></p>'

        var infoWindow = new google.maps.InfoWindow({
          position: new google.maps.LatLng({{la_data}}, {{lo_data}}),
          content: content_string
        });
        infoWindow.open(map);
        {% endif %}
        

        var paths = [new google.maps.LatLng(37.7651185, -122.4176042),
          new google.maps.LatLng(37.7651185, -122.4066062),
          new google.maps.LatLng(37.7529621, -122.4066062),
          new google.maps.LatLng(37.7529621, -122.4176042)];

        var shape = new google.maps.Polygon({
          paths: paths,
          strokeColor: '#ff0000',
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: '#ff0000',
          fillOpacity: 0.35
        });
        
        shape.setMap(map);

        }


        google.maps.event.addDomListener(window, 'load', initialize);
        </script> 

        <div id="map-canvas" style="width: 100%; height: 400px;margin-left:auto;margin-right:auto;">
        <hr>
    </div>

<!--     <div>
        <img src="{{url_for('static', filename='map_temp.jpg')}}"/ width="100%">
        </center>
    </div> -->
</div>
{% endblock %}

